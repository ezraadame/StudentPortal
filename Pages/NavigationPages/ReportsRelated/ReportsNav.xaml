<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="StudentPortal.Pages.NavigationPages.ReportsRelated.ReportsNav"
             Title="Assessment Reports"
             BackgroundColor="GhostWhite">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- Report Header -->
            <Frame BackgroundColor="DarkSlateBlue" 
                   CornerRadius="15" 
                   Padding="20"
                   HasShadow="True">
                <StackLayout>
                    <Label Text="Course Assessment Report" 
                           FontSize="24" 
                           FontAttributes="Bold" 
                           TextColor="White"
                           HorizontalOptions="Center" />

                    <Label x:Name="ReportTimestampLabel"
                           Text="Generated on: Loading..."
                           FontSize="14"
                           TextColor="LightGray"
                           HorizontalOptions="Center"
                           Margin="0,5,0,0" />
                </StackLayout>
            </Frame>

            <!-- Report Controls -->
            <Frame BackgroundColor="White" 
                   CornerRadius="10" 
                   Padding="15"
                   HasShadow="True">
                <StackLayout Orientation="Horizontal" 
                             HorizontalOptions="Center"
                             Spacing="15">

                    <Button x:Name="GenerateReportButton"
                            Text="Generate Report"
                            BackgroundColor="ForestGreen"
                            TextColor="White"
                            FontAttributes="Bold"
                            CornerRadius="8"
                            Padding="20,10"
                            Clicked="GenerateReportButton_Clicked" />

                    <Button x:Name="RefreshReportButton"
                            Text="Refresh"
                            BackgroundColor="DodgerBlue"
                            TextColor="White"
                            FontAttributes="Bold"
                            CornerRadius="8"
                            Padding="20,10"
                            Clicked="RefreshReportButton_Clicked" />
                </StackLayout>
            </Frame>

            <!-- Loading Indicator -->
            <ActivityIndicator x:Name="LoadingIndicator"
                               IsVisible="False"
                               IsRunning="False"
                               Color="DodgerBlue"
                               VerticalOptions="Center" />

            <!-- Report Summary -->
            <Frame x:Name="SummaryFrame"
                   BackgroundColor="LightCyan" 
                   CornerRadius="10" 
                   Padding="15"
                   HasShadow="True"
                   IsVisible="False">
                <StackLayout Orientation="Horizontal" 
                             HorizontalOptions="Center"
                             Spacing="30">

                    <StackLayout HorizontalOptions="Center">
                        <Label x:Name="TotalCoursesLabel"
                               Text="0"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="DarkCyan"
                               HorizontalOptions="Center" />
                        <Label Text="Total Courses"
                               FontSize="12"
                               TextColor="Gray"
                               HorizontalOptions="Center" />
                    </StackLayout>

                    <StackLayout HorizontalOptions="Center">
                        <Label x:Name="TotalAssessmentsLabel"
                               Text="0"
                               FontSize="20"
                               FontAttributes="Bold"
                               TextColor="DarkCyan"
                               HorizontalOptions="Center" />
                        <Label Text="Total Assessments"
                               FontSize="12"
                               TextColor="Gray"
                               HorizontalOptions="Center" />
                    </StackLayout>
                </StackLayout>
            </Frame>

            <!-- Report Table Header -->
            <Frame x:Name="TableHeaderFrame"
                   BackgroundColor="SteelBlue" 
                   
                   Padding="15,10"
                   HasShadow="False"
                   IsVisible="False">

                <Grid ColumnSpacing="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*" />
                        <!-- Course Name -->
                        <ColumnDefinition Width="2*" />
                        <!-- Assessment Name -->
                        <ColumnDefinition Width="1*" />
                        <!-- Type -->
                        <ColumnDefinition Width="1.5*" />
                        <!-- Start Date -->
                        <ColumnDefinition Width="1.5*" />
                        <!-- End Date -->
                    </Grid.ColumnDefinitions>

                    <Label Grid.Column="0" 
                           Text="Course" 
                           FontAttributes="Bold" 
                           TextColor="White" 
                           FontSize="14"
                           VerticalOptions="Center" />

                    <Label Grid.Column="1" 
                           Text="Assessment" 
                           FontAttributes="Bold" 
                           TextColor="White" 
                           FontSize="14"
                           VerticalOptions="Center" />

                    <Label Grid.Column="2" 
                           Text="Type" 
                           FontAttributes="Bold" 
                           TextColor="White" 
                           FontSize="14"
                           VerticalOptions="Center" />

                    <Label Grid.Column="3" 
                           Text="Start Date" 
                           FontAttributes="Bold" 
                           TextColor="White" 
                           FontSize="14"
                           VerticalOptions="Center" />

                    <Label Grid.Column="4" 
                           Text="End Date" 
                           FontAttributes="Bold" 
                           TextColor="White" 
                           FontSize="14"
                           VerticalOptions="Center" />

                </Grid>
            </Frame>

            <!-- Report Data -->
            <CollectionView x:Name="ReportDataView"
                            IsVisible="False">

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame BackgroundColor="White"
                               CornerRadius="0"
                               Padding="15,12"
                               HasShadow="False"
                               BorderColor="LightGray">

                            <Grid ColumnSpacing="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="2*" />
                                    <ColumnDefinition Width="1*" />
                                    <ColumnDefinition Width="1.5*" />
                                    <ColumnDefinition Width="1.5*" />
                                    
                                </Grid.ColumnDefinitions>

                                <Label Grid.Column="0" 
                                       Text="{Binding CourseName}" 
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="DarkBlue"
                                       VerticalOptions="Center"
                                       LineBreakMode="WordWrap" />

                                <Label Grid.Column="1" 
                                       Text="{Binding AssessmentName}" 
                                       FontSize="14"
                                       TextColor="Black"
                                       VerticalOptions="Center"
                                       LineBreakMode="WordWrap" />

                                <Label Grid.Column="2" 
                                       Text="{Binding Type}" 
                                       FontSize="12"
                                       TextColor="Purple"
                                       FontAttributes="Italic"
                                       VerticalOptions="Center" />

                                <Label Grid.Column="3" 
                                       Text="{Binding StartDate, StringFormat='{0:MM/dd/yyyy}'}" 
                                       FontSize="12"
                                       TextColor="DarkGreen"
                                       VerticalOptions="Center" />

                                <Label Grid.Column="4" 
                                       Text="{Binding EndDate, StringFormat='{0:MM/dd/yyyy}'}" 
                                       FontSize="12"
                                       TextColor="DarkRed"
                                       VerticalOptions="Center" />

                                <Label Grid.Column="5" 
                                       Text="{Binding Status}" 
                                       FontSize="12"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center">
                                    <Label.Triggers>
                                        <DataTrigger TargetType="Label" Binding="{Binding Status}" Value="Completed">
                                            <Setter Property="TextColor" Value="ForestGreen" />
                                        </DataTrigger>
                                        <DataTrigger TargetType="Label" Binding="{Binding Status}" Value="In Progress">
                                            <Setter Property="TextColor" Value="Orange" />
                                        </DataTrigger>
                                        <DataTrigger TargetType="Label" Binding="{Binding Status}" Value="Upcoming">
                                            <Setter Property="TextColor" Value="DodgerBlue" />
                                        </DataTrigger>
                                    </Label.Triggers>
                                </Label>
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Empty State -->
            <Frame x:Name="EmptyStateFrame"
                   BackgroundColor="LightYellow" 
                   CornerRadius="10" 
                   Padding="30"
                   HasShadow="True"
                   IsVisible="False">
                <StackLayout HorizontalOptions="Center">
                    <Label Text="ðŸ“Š" 
                           FontSize="40"
                           HorizontalOptions="Center" />
                    <Label Text="No Assessment Data Available" 
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="Orange"
                           HorizontalOptions="Center" />
                    <Label Text="Click 'Generate Report' to load assessment data" 
                           FontSize="14"
                           TextColor="Gray"
                           HorizontalOptions="Center"
                           Margin="0,5,0,0" />
                </StackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>

